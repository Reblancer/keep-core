const { initContracts } = require('../helpers/initContracts')
const { accounts, contract, web3 } = require("@openzeppelin/test-environment")
const stakeDelegate = require('../helpers/stakeDelegate')

const BN = web3.utils.BN
const chai = require('chai')
chai.use(require('bn-chai')(BN))

// all operators in the network, no duplicates in this array
const allOperators = [
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0x8930F2155Bc67091280872C9461318300A29536b",
    "0xE68B26a27327b4b3dE6B61f7F3a2ef2D544014dB",
    "0xdE47fC4D40503063864E27CEb533181847861F6c",
    "0x390b3651305A2b93002D5D340938B40C47881797",
    "0x25e458d05253A8E69332A2cC79E6EE06fB8e7743",
    "0xf3b95228f1D0fA44172DE15Fa2EAc062d2B95e2C",
    "0xC2243c8550d03cc112110B940ed8a4b6C42eCC3C",
    "0xc6349eEC31048787676b6297ba71721376A8DdcF",
    "0x7BdA94202049858060E4DfFa42EcB00C58d12452",
    "0x284C6571cF35b5879A247922E216eF495441aDA7",
    "0x1e5801DB6779b44A90104AE856602424D8853807",
    "0xA60bcfD3617Ae181F9E97a44B79B3CF5f1A5c367",
    "0xfc97a906c715587b56c2c65a07ce731ba80339de",
    "0xDcd4199e22d09248cA2583cBDD2759b2acD22381",
    "0xE48495557a31b04693142E33B7A05073Ea03b767",
    "0x85D548b251cEb537f62AED0b6f6f4C48d3C822c8",
    "0x3712C6fED51CECA83cA953f6FF3458f2339436b4",
    "0xca70feA021359778daeC479b97D0cD2eFE1Ad099",
    "0xaEa619D02dcF7299FB24dB2F60A08BFC8FB2dbcf",
    "0x4c32A89ef53B0658C6C3BD21D592f46D9cEA83EF",
    "0x03ab65648d9F75da043581eFDC8332aEDe07D70F",
    "0x7E6332d18719a5463d3867a1a892359509589a3d",
    "0xe5c8dCD32CABDf97c48853ee14E63487fE15A907",
    "0x438dEcAfa74CD174eBF71c6b4BD715D001f6FAB7",
    "0xA4166C3E14cbDd6D4494945A99616f1C73aD9699",
    "0x36C56A69c2aeA23879b59dB0e99D57eF2ff77f06",
    "0x81e1B56db174a935fe81E4b9839d6D92528090f4",
    "0x76cA4B2300A2abe46dCD736F71A207FfBcB3C5E8",
    "0xA543441313F7FA7F9215B84854E6DC8386B93383",
    "0xb822Ec4FaBf37B881397bd3425152AdBfe516174",
    "0xb5AA449A4F582dddaB01DB8D6fb5258c640B1012",
    "0xe81C50802bF9dDf190ce493A6a76CF3d36dD8793",
    "0x6757B362BFA1DDE1ECE9693eC0A6527909E318b7",
    "0x590204F050a12E61ED5F58188DdEb86C49Ee270d",
    "0xf26D8407970Ca01b44437D95ce750061b23a4Df4",
    "0xF6F4E1E6127F369d74ECcE6523c59C75D24CE45C",
    "0x1Aa453dAD55b09fa3D2609D5a6e80C0FD3DaF113",
    "0x3E5d36Bf359698Bc53BdAF8bc97dE56263FA0a70",
    "0xFBd33B871C6E6e11F9d6A62DfC780CE4bEA1CE17",
    "0xf25796D81d6caaCA3616CE17ECc94966821D4F1d"
]

/*
Group 0x2e490c9c6d822341a23a2c37c203cff8530345ce59c8f3d218cd7f2a21bf5ac51c3ed77e1f7e756a517ec62b259c274b21a4111e6f09ce1c207d7aa9e3144591081d6f6a60b6417e0522ea8316b2320ac68bd7dc2daff8aaf72d25e4865341c92bf2273997a8b44c4fdb1098f2ccccd38ec3a36aa4c327abf779b9351344d827:
 - has index 0
 - has 64 members
 - its DKG result was submitted by member 1
 - misbehaved members bytes: null
 - has 23 unique members
*/
const group1PubKey = "0x2e490c9c6d822341a23a2c37c203cff8530345ce59c8f3d218cd7f2a21bf5ac51c3ed77e1f7e756a517ec62b259c274b21a4111e6f09ce1c207d7aa9e3144591081d6f6a60b6417e0522ea8316b2320ac68bd7dc2daff8aaf72d25e4865341c92bf2273997a8b44c4fdb1098f2ccccd38ec3a36aa4c327abf779b9351344d827"
const group1Operators = [
    "0xDcd4199e22d09248cA2583cBDD2759b2acD22381",
    "0x81e1B56db174a935fe81E4b9839d6D92528090f4",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0x7BdA94202049858060E4DfFa42EcB00C58d12452",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0x7BdA94202049858060E4DfFa42EcB00C58d12452",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0xdE47fC4D40503063864E27CEb533181847861F6c",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0x8930F2155Bc67091280872C9461318300A29536b",
    "0xf3b95228f1D0fA44172DE15Fa2EAc062d2B95e2C",
    "0x7BdA94202049858060E4DfFa42EcB00C58d12452",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0xc6349eEC31048787676b6297ba71721376A8DdcF",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0x7BdA94202049858060E4DfFa42EcB00C58d12452",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0x8930F2155Bc67091280872C9461318300A29536b",
    "0xc010B84528b0809295Fcd21CB37415E8c532343A",
    "0xfc97a906c715587b56c2c65a07ce731ba80339de",
    "0xf3b95228f1D0fA44172DE15Fa2EAc062d2B95e2C",
    "0x390b3651305A2b93002D5D340938B40C47881797",
    "0xc6349eEC31048787676b6297ba71721376A8DdcF",
    "0xC2243c8550d03cc112110B940ed8a4b6C42eCC3C",
    "0x390b3651305A2b93002D5D340938B40C47881797",
    "0x7BdA94202049858060E4DfFa42EcB00C58d12452",
    "0xdE47fC4D40503063864E27CEb533181847861F6c",
    "0xA60bcfD3617Ae181F9E97a44B79B3CF5f1A5c367",
    "0xE68B26a27327b4b3dE6B61f7F3a2ef2D544014dB",
    "0x3712C6fED51CECA83cA953f6FF3458f2339436b4",
    "0xaEa619D02dcF7299FB24dB2F60A08BFC8FB2dbcf",
    "0xdE47fC4D40503063864E27CEb533181847861F6c",
    "0x438dEcAfa74CD174eBF71c6b4BD715D001f6FAB7",
    "0xf3b95228f1D0fA44172DE15Fa2EAc062d2B95e2C",
    "0xC2243c8550d03cc112110B940ed8a4b6C42eCC3C",
    "0x36C56A69c2aeA23879b59dB0e99D57eF2ff77f06",
    "0x1e5801DB6779b44A90104AE856602424D8853807",
    "0x7BdA94202049858060E4DfFa42EcB00C58d12452",
    "0xDcd4199e22d09248cA2583cBDD2759b2acD22381",
    "0x390b3651305A2b93002D5D340938B40C47881797",
    "0xdE47fC4D40503063864E27CEb533181847861F6c",
    "0xca70feA021359778daeC479b97D0cD2eFE1Ad099",
    "0xe5c8dCD32CABDf97c48853ee14E63487fE15A907",
    "0xE68B26a27327b4b3dE6B61f7F3a2ef2D544014dB",
    "0xC2243c8550d03cc112110B940ed8a4b6C42eCC3C",
    "0xE68B26a27327b4b3dE6B61f7F3a2ef2D544014dB",
    "0x7E6332d18719a5463d3867a1a892359509589a3d",
    "0xA543441313F7FA7F9215B84854E6DC8386B93383",
    "0xb822Ec4FaBf37B881397bd3425152AdBfe516174",
    "0x1e5801DB6779b44A90104AE856602424D8853807",
    "0x8930F2155Bc67091280872C9461318300A29536b",
    "0xdE47fC4D40503063864E27CEb533181847861F6c",
    "0xE68B26a27327b4b3dE6B61f7F3a2ef2D544014dB",
    "0x3712C6fED51CECA83cA953f6FF3458f2339436b4",
    "0x8930F2155Bc67091280872C9461318300A29536b"
]

/*
Group 0x118e601ef5f594cd29053ee47490edbaae895109704af19d57114c4a77fa73041d447cd0fb895ad439f9882770a9a1a17d64bdf0c47a07621d193c25099a2d61268fb8a201e4afc57d0416bbef2641a70b21b9d165811739c253fc45f136d1ac01e87ccc31db14aaef986ac0afc70b41db2a36838b1c6a0cf95755c1a970b652:
 - has index 2
 - has 63 members
 - its DKG result was submitted by member 1
 - misbehaved members bytes: 0x12
 - has 30 unique members
*/
const group2PubKey = "0x118e601ef5f594cd29053ee47490edbaae895109704af19d57114c4a77fa73041d447cd0fb895ad439f9882770a9a1a17d64bdf0c47a07621d193c25099a2d61268fb8a201e4afc57d0416bbef2641a70b21b9d165811739c253fc45f136d1ac01e87ccc31db14aaef986ac0afc70b41db2a36838b1c6a0cf95755c1a970b652"
const group2Operators = [
    "0x390b3651305A2b93002D5D340938B40C47881797",
    "0x25e458d05253A8E69332A2cC79E6EE06fB8e7743",
    "0xA60bcfD3617Ae181F9E97a44B79B3CF5f1A5c367",
    "0xdE47fC4D40503063864E27CEb533181847861F6c",
    "0x3712C6fED51CECA83cA953f6FF3458f2339436b4",
    "0x25e458d05253A8E69332A2cC79E6EE06fB8e7743",
    "0xC2243c8550d03cc112110B940ed8a4b6C42eCC3C",
    "0xf3b95228f1D0fA44172DE15Fa2EAc062d2B95e2C",
    "0xb5AA449A4F582dddaB01DB8D6fb5258c640B1012",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0xca70feA021359778daeC479b97D0cD2eFE1Ad099",
    "0x25e458d05253A8E69332A2cC79E6EE06fB8e7743",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0xE68B26a27327b4b3dE6B61f7F3a2ef2D544014dB",
    "0x8930F2155Bc67091280872C9461318300A29536b",
    "0x25e458d05253A8E69332A2cC79E6EE06fB8e7743",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0xf3b95228f1D0fA44172DE15Fa2EAc062d2B95e2C",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0xC2243c8550d03cc112110B940ed8a4b6C42eCC3C",
    "0x8930F2155Bc67091280872C9461318300A29536b",
    "0x25e458d05253A8E69332A2cC79E6EE06fB8e7743",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0xfc97a906c715587b56c2c65a07ce731ba80339de",
    "0xE68B26a27327b4b3dE6B61f7F3a2ef2D544014dB",
    "0xdE47fC4D40503063864E27CEb533181847861F6c",
    "0xfc97a906c715587b56c2c65a07ce731ba80339de",
    "0xA60bcfD3617Ae181F9E97a44B79B3CF5f1A5c367",
    "0x25e458d05253A8E69332A2cC79E6EE06fB8e7743",
    "0x1e5801DB6779b44A90104AE856602424D8853807",
    "0xE68B26a27327b4b3dE6B61f7F3a2ef2D544014dB",
    "0xA4166C3E14cbDd6D4494945A99616f1C73aD9699",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0xE68B26a27327b4b3dE6B61f7F3a2ef2D544014dB",
    "0xca70feA021359778daeC479b97D0cD2eFE1Ad099",
    "0x25e458d05253A8E69332A2cC79E6EE06fB8e7743",
    "0x7E6332d18719a5463d3867a1a892359509589a3d",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0xdE47fC4D40503063864E27CEb533181847861F6c",
    "0xE68B26a27327b4b3dE6B61f7F3a2ef2D544014dB",
    "0xe5c8dCD32CABDf97c48853ee14E63487fE15A907",
    "0xf3b95228f1D0fA44172DE15Fa2EAc062d2B95e2C",
    "0x8930F2155Bc67091280872C9461318300A29536b",
    "0x390b3651305A2b93002D5D340938B40C47881797",
    "0xaEa619D02dcF7299FB24dB2F60A08BFC8FB2dbcf",
    "0x438dEcAfa74CD174eBF71c6b4BD715D001f6FAB7",
    "0x390b3651305A2b93002D5D340938B40C47881797",
    "0xdE47fC4D40503063864E27CEb533181847861F6c",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0xC2243c8550d03cc112110B940ed8a4b6C42eCC3C",
    "0xE68B26a27327b4b3dE6B61f7F3a2ef2D544014dB",
    "0xE68B26a27327b4b3dE6B61f7F3a2ef2D544014dB",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0x390b3651305A2b93002D5D340938B40C47881797",
    "0xA60bcfD3617Ae181F9E97a44B79B3CF5f1A5c367",
    "0x8930F2155Bc67091280872C9461318300A29536b",
    "0xc6349eEC31048787676b6297ba71721376A8DdcF",
    "0xDcd4199e22d09248cA2583cBDD2759b2acD22381",
    "0x390b3651305A2b93002D5D340938B40C47881797",
    "0xc6349eEC31048787676b6297ba71721376A8DdcF",
    "0x8930F2155Bc67091280872C9461318300A29536b",
    "0xe81C50802bF9dDf190ce493A6a76CF3d36dD8793",
    "0x8930F2155Bc67091280872C9461318300A29536b"
]

/*
Group 0x118e601ef5f594cd29053ee47490edbaae895109704af19d57114c4a77fa73041d447cd0fb895ad439f9882770a9a1a17d64bdf0c47a07621d193c25099a2d61268fb8a201e4afc57d0416bbef2641a70b21b9d165811739c253fc45f136d1ac01e87ccc31db14aaef986ac0afc70b41db2a36838b1c6a0cf95755c1a970b652:
 - has index 2
 - has 63 members
 - its DKG result was submitted by member 1
 - misbehaved members bytes: 0x12
 - has 30 unique members
*/
const group3PubKey = "0x118e601ef5f594cd29053ee47490edbaae895109704af19d57114c4a77fa73041d447cd0fb895ad439f9882770a9a1a17d64bdf0c47a07621d193c25099a2d61268fb8a201e4afc57d0416bbef2641a70b21b9d165811739c253fc45f136d1ac01e87ccc31db14aaef986ac0afc70b41db2a36838b1c6a0cf95755c1a970b652"
const group3Operators = [
    "0x6757B362BFA1DDE1ECE9693eC0A6527909E318b7",
    "0xE68B26a27327b4b3dE6B61f7F3a2ef2D544014dB",
    "0x4c32A89ef53B0658C6C3BD21D592f46D9cEA83EF",
    "0x390b3651305A2b93002D5D340938B40C47881797",
    "0x284C6571cF35b5879A247922E216eF495441aDA7",
    "0xfc97a906c715587b56c2c65a07ce731ba80339de",
    "0x03ab65648d9F75da043581eFDC8332aEDe07D70F",
    "0xaEa619D02dcF7299FB24dB2F60A08BFC8FB2dbcf",
    "0xA4166C3E14cbDd6D4494945A99616f1C73aD9699",
    "0x8930F2155Bc67091280872C9461318300A29536b",
    "0x390b3651305A2b93002D5D340938B40C47881797",
    "0xc6349eEC31048787676b6297ba71721376A8DdcF",
    "0x1e5801DB6779b44A90104AE856602424D8853807",
    "0xE48495557a31b04693142E33B7A05073Ea03b767",
    "0x284C6571cF35b5879A247922E216eF495441aDA7",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0xf3b95228f1D0fA44172DE15Fa2EAc062d2B95e2C",
    "0x590204F050a12E61ED5F58188DdEb86C49Ee270d",
    "0xE68B26a27327b4b3dE6B61f7F3a2ef2D544014dB",
    "0x03ab65648d9F75da043581eFDC8332aEDe07D70F",
    "0x284C6571cF35b5879A247922E216eF495441aDA7",
    "0x8930F2155Bc67091280872C9461318300A29536b",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0xc6349eEC31048787676b6297ba71721376A8DdcF",
    "0xdE47fC4D40503063864E27CEb533181847861F6c",
    "0xE48495557a31b04693142E33B7A05073Ea03b767",
    "0x4c32A89ef53B0658C6C3BD21D592f46D9cEA83EF",
    "0x284C6571cF35b5879A247922E216eF495441aDA7",
    "0x36C56A69c2aeA23879b59dB0e99D57eF2ff77f06",
    "0xdE47fC4D40503063864E27CEb533181847861F6c",
    "0xC2243c8550d03cc112110B940ed8a4b6C42eCC3C",
    "0x25e458d05253A8E69332A2cC79E6EE06fB8e7743",
    "0x85D548b251cEb537f62AED0b6f6f4C48d3C822c8",
    "0x81e1B56db174a935fe81E4b9839d6D92528090f4",
    "0xDcd4199e22d09248cA2583cBDD2759b2acD22381",
    "0x284C6571cF35b5879A247922E216eF495441aDA7",
    "0xf26D8407970Ca01b44437D95ce750061b23a4Df4",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0xc6349eEC31048787676b6297ba71721376A8DdcF",
    "0x4c32A89ef53B0658C6C3BD21D592f46D9cEA83EF",
    "0xE48495557a31b04693142E33B7A05073Ea03b767",
    "0xdE47fC4D40503063864E27CEb533181847861F6c",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0x8930F2155Bc67091280872C9461318300A29536b",
    "0x85D548b251cEb537f62AED0b6f6f4C48d3C822c8",
    "0x8930F2155Bc67091280872C9461318300A29536b",
    "0x76cA4B2300A2abe46dCD736F71A207FfBcB3C5E8",
    "0xF6F4E1E6127F369d74ECcE6523c59C75D24CE45C",
    "0x85D548b251cEb537f62AED0b6f6f4C48d3C822c8",
    "0xE48495557a31b04693142E33B7A05073Ea03b767",
    "0x03ab65648d9F75da043581eFDC8332aEDe07D70F",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0x1Aa453dAD55b09fa3D2609D5a6e80C0FD3DaF113",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0xe73a3571DA4c7d7AC251bdB700dbe3bc2017CE5a",
    "0x3E5d36Bf359698Bc53BdAF8bc97dE56263FA0a70",
    "0x284C6571cF35b5879A247922E216eF495441aDA7",
    "0xE68B26a27327b4b3dE6B61f7F3a2ef2D544014dB",
    "0x85D548b251cEb537f62AED0b6f6f4C48d3C822c8",
    "0x1e5801DB6779b44A90104AE856602424D8853807",
    "0x76cA4B2300A2abe46dCD736F71A207FfBcB3C5E8",
    "0xFBd33B871C6E6e11F9d6A62DfC780CE4bEA1CE17",
    "0xf25796D81d6caaCA3616CE17ECc94966821D4F1d"
]

describe.only('BeaconBackportRewards', () => {
    const owner = accounts[0]
    const excessRecipient = accounts[1]

    let beneficiaries
    let tokenContract, stakingContract, operatorContract, rewardsContract

    before(async () => {
        beneficiaries = new Map()
        for (let i = 0; i < allOperators.length; i++) { 
            // don't use the first 10 accounts, keep them for system-specific
            // or deployment roles
            beneficiaries.set(allOperators[i], accounts[i + 10])
        } 

        let contracts = await initContracts(
            contract.fromArtifact('TokenStaking'),
            contract.fromArtifact('KeepRandomBeaconService'),
            contract.fromArtifact('KeepRandomBeaconServiceImplV1'),
            contract.fromArtifact('KeepRandomBeaconOperatorBeaconRewardsStub')
        )

        tokenContract = contracts.token
        stakingContract = contracts.stakingContract
        operatorContract = contracts.operatorContract
        
        const minimumStake = await stakingContract.minimumStake()
        for (let i = 0; i < allOperators.length; i++) {
            const operator = allOperators[i]
            const beneficiary = beneficiaries.get(operator)
            const authorizer = operator
            await stakeDelegate(
                stakingContract, tokenContract, owner, operator, 
                beneficiary, authorizer, minimumStake.muln(20)
            )
        }

        await operatorContract.registerNewGroup(group1PubKey, group1Operators)
        await operatorContract.registerNewGroup(group2PubKey, group2Operators)
        await operatorContract.registerNewGroup(group3PubKey, group3Operators)
        
        // 2020-05-05 @ 8:15am (UTC)
        // The time of deploying KeepRandomBeaconOperator
        // https://etherscan.io/tx/0x262b2cce68cfa389ccbf1ed9b6dc94efe030b0c70f0acac30d53aa62a50487c3
        const firstIntervalStart = 1588666545

        // one interval for all 3 groups
        const intervalWeights = [100]
        const lastGroupOfInterval = [2]

        rewardsContract = await contract.fromArtifact('BeaconBackportRewards').new(
            tokenContract.address,
            firstIntervalStart,
            intervalWeights,
            operatorContract.address,
            stakingContract.address,
            lastGroupOfInterval,
            [], // no excluded groups
            excessRecipient
        )

        const totalRewards = web3.utils.toBN("200000000000000000000000") // 200k KEEP

        await tokenContract.approveAndCall(
            rewardsContract.address,
            totalRewards,
            "0x0",
            { from: owner }
        )
    })  

    it("works", async() => {
        console.log(`lastInterval = ${await rewardsContract.lastInterval()}`)
        console.log(`lastEligibleGroup = ${await rewardsContract.lastEligibleGroup()}`)

        await rewardsContract.allocateRewards(0)
        console.log('allocated rewards[0] = ' + (await rewardsContract.getAllocatedRewards(0)))
        
        // groups with index 0,1,2 - receive rewards
        await rewardsContract.receiveReward(0)
        await rewardsContract.receiveReward(1)
        await rewardsContract.receiveReward(2)

        console.log('excess balance before = ' + (await web3.eth.getBalance(excessRecipient)))
        await rewardsContract.withdrawExcess()
        console.log('excess balance after = ' + (await web3.eth.getBalance(excessRecipient)))

        console.log('all distributed')

        for (let i = 0; i < allOperators.length; i++) {
            console.log(`${allOperators[i]}: ${await tokenContract.balanceOf(beneficiaries.get(allOperators[i]))}`)
        }
    })
})